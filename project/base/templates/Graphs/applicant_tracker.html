<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Total Scholars</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<div class="text-center mt-12">
    <label class="mr-12 text-white text-4xl">{{ ongoing_scholars_count }}</label>
    
    <br>
    <div class="mt-5">
        <label class="text-white font-bold text-4xl" style="color: #39B8FF;">Total Active Scholars</label>
    </div>
</div>

<div style="width: 100px; height: 120px; margin: 20px auto; position: relative; top: -150px; left:100px;">
    <canvas id="doughnutChart"></canvas>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const canvas = document.getElementById('doughnutChart');

        canvas.width = 200;
        canvas.height = 240;

        const percentageOngoing = {{ percentage_ongoing }};
        const totalValue = 100;

        const data = {
        datasets: [{
        data: [percentageOngoing, totalValue - percentageOngoing],
        backgroundColor: [
            'rgba(75, 192, 192, 0.2)',
            'rgba(255, 255, 255, 0)',  
        ],
        borderColor: [
            'rgba(75, 192, 192)', 
            'rgba(255, 255, 255, 0)',
        ],
        borderWidth: 1,
        hoverOffset: 4,
        borderRadius: 50,
            }],
        };

        const ctx = canvas.getContext('2d');

        const myChart = new Chart(ctx, {
            type: 'doughnut',
            data: data,
            options: {
                cutout: '70%',
                plugins: {
                    legend: {
                        display: false,
                    },
                    tooltip: {
                        callbacks: {
                            label: function (tooltipItem, data) {
                                var dataset = data.datasets[tooltipItem.datasetIndex];
                                var value = dataset.data[tooltipItem.index];
                                return dataset.label + ": " + value + "%";
                            },
                        },
                    },
                },
                layout: {
                    padding: {
                        left: 0,
                        right: 0,
                        top: 0,
                        bottom: 16,
                    },
                },
                animation: {
                    onComplete: function (animation) {
                        const xCoor = myChart.width / 2;
                        const yCoor = myChart.height / 2.5;
                        ctx.font = '12px sans-serif';
                        ctx.fillStyle = 'rgba(255, 255, 255)';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        const formattedPercentage = percentageOngoing.toFixed(2);
                        ctx.fillText(`${formattedPercentage}%`, xCoor, yCoor);
                    }
                },
            },
        });
    });
</script>

</body>

</html>
